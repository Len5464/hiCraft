var g=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var h=(n,t,e)=>(g(n,t,"read from private field"),e?e.call(n):t.get(n)),c=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},r=(n,t,e,o)=>(g(n,t,"write to private field"),o?o.call(n,e):t.set(n,e),e);var m=(n,t,e,o)=>({set _(i){r(n,t,i,e)},get _(){return h(n,t,o)}});var s,a;class f{constructor(t,e){c(this,s,0);c(this,a,void 0);const o=t instanceof HTMLElement?t:document.querySelector(t);if(!o)throw new Error("無效的 gallery 選擇器");const{imgURLs:i,loadButton:l,loadAmount:d=8}=e;if(!Array.isArray(i))throw new Error("config物件中，imgURLs 必須是陣列");if(!(l instanceof HTMLElement))throw new Error("config物件中，loadButton 必須是 HTML 元素");this.container=o,this.rowHeight=parseInt(getComputedStyle(this.container).getPropertyValue("grid-auto-rows")),this.rowGap=parseInt(getComputedStyle(this.container).getPropertyValue("grid-row-gap")),this.imgURLs=i,this.loadAmount=d,this.loadButton=l,r(this,a,`${l.textContent}`),l.addEventListener("click",u=>{u.preventDefault(),this.loadItems(d)}),this.loadItems(d)}loadItems(t){const e=this.imgURLs.splice(0,t);e.length>0?(r(this,s,e.length),e.forEach(o=>this.genNewItem(o)),this.loadButton.innerHTML='<span class="spinner-border spinner-border-sm ms-4" role="status" aria-hidden="true"></span>載入中...'):(r(this,s,0),this.loadButton.textContent="沒有更多了")}genNewItem(t){const e=document.createElement("img"),o=document.createElement("a"),i=document.createElement("li");e.onload=()=>{this.resizeItem(i),m(this,s)._--,h(this,s)===0&&(this.loadButton.innerHTML=h(this,a))},e.src=t,e.classList.add("gallery-img"),i.classList.add("gallery-item"),o.href="craft.html",o.appendChild(e),i.appendChild(o),this.container.appendChild(i)}resizeItem(t){const e=t.querySelector(".gallery-img");if(!(e instanceof HTMLElement))return;const o=Math.floor((e.getBoundingClientRect().height+this.rowGap)/(this.rowHeight+this.rowGap));t.style.gridRowEnd=`span ${o}`}}s=new WeakMap,a=new WeakMap;export{f as G};
